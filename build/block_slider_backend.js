!function(e){var t={};function l(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=t,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(o,n,function(t){return e[t]}.bind(null,n));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=9)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.lodash},function(e){e.exports=JSON.parse('{"apiVersion":2,"name":"cumulus-gutenberg/testimonials-slider","title":"Testimonial Slider","description":"Display testimonials in a slider","category":"widgets","keywords":["testimonial","slider"],"icon":{"src":"slides","foreground":"#3399cc"},"supports":{"html":false,"anchor":true,"customClassName":false},"attributes":{"categories":{"type":"array","items":{"type":"object"},"default":[]},"tags":{"type":"array","items":{"type":"object"},"default":[]},"postsToShow":{"type":"number","default":0},"order":{"type":"string","default":"desc"},"orderBy":{"type":"string","default":"rand"},"showContent":{"type":"string","default":"full"},"showLogo":{"type":"boolean","default":true},"showCustomerName":{"type":"boolean","default":true},"showCustomerTitle":{"type":"boolean","default":true},"showCompany":{"type":"boolean","default":true},"slidesToShow":{"type":"number","default":1},"slidesToScroll":{"type":"number","default":1},"autoplay":{"type":"boolean","default":true},"autoplaySpeed":{"type":"number","default":8},"transitionSpeed":{"type":"number","default":0.5},"showArrows":{"type":"boolean","default":true},"showDots":{"type":"boolean","default":true},"animationType":{"type":"string","default":"slide"},"verticalAlign":{"type":"string","default":"center"}},"editorScript":"file:../../../build/block_slider_backend.js","editorStyle":"file:../../../build/block_slider_backend.css"}')},function(e,t,l){},function(e,t,l){},function(e,t){function l(){return e.exports=l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,l.apply(this,arguments)}e.exports=l,e.exports.default=e.exports,e.exports.__esModule=!0},,,,function(e,t,l){"use strict";l.r(t),l(3),l(4);var o=l(0),n=l(5),a=l.n(n),r=l(1);const{useDebounce:s,usePrevious:c}=wp.compose,{RawHTML:u,useEffect:i,useRef:p,useState:d}=wp.element,{__:__,sprintf:b}=wp.i18n,m=wp.apiFetch,{addQueryArgs:h}=wp.url,{Placeholder:f,Spinner:g}=wp.components,{getBlockType:y}=wp.blocks;function w({className:e}){return Object(o.createElement)(f,{className:e},__("Block rendered as empty."))}function O({response:e,className:t}){const l=b(// translators: %s: error message describing the problem
__("Error loading block: %s"),e.errorMsg);return Object(o.createElement)(f,{className:t},l)}function v(e){const{attributes:t,block:l,className:n,httpMethod:b="GET",urlQueryArgs:v,onChange:j,onError:C,EmptyResponsePlaceholder:E=w,ErrorResponsePlaceholder:S=O}=e,k=p(!0),T=p(),[x,_]=d(null),[A,N]=d(null),F=c(e);function P(){if(!k.current)return;null!==x&&(N(x),_(null));const e=t&&function(e,t){const l=y(e);if(void 0===l)throw new Error(`Block type '${e}' is not registered.`);return Object(r.reduce)(l.attributes,(e,l,o)=>{const n=t[o];return void 0!==n?e[o]=n:l.hasOwnProperty("default")&&(e[o]=l.default),-1!==["node","children"].indexOf(l.source)&&("string"==typeof e[o]?e[o]=[e[o]]:Array.isArray(e[o])||(e[o]=[])),e},{})}(l,t),o="POST"===b,n=function(e,t=null,l={}){return h("/wp/v2/block-renderer/"+e,{context:"edit",...null!==t?{attributes:t}:{},...l})}(l,o?null:null!=e?e:null,v),a=o?{attributes:null!=e?e:null}:null,s=e=>k.current&&e===T.current;return T.current=m({path:n,data:a,method:o?"POST":"GET"}).then(e=>{s&&e&&_(e.rendered)}).then(()=>{j&&j()}).catch(e=>{s&&(_({error:!0,errorMsg:e.message}),C&&C(e))})}const M=s(P,500);return i(()=>()=>{k.current=!1},[]),i(()=>{void 0===F?P():Object(r.isEqual)(F.attributes,e.attributes)||M()}),""===x?Object(o.createElement)(E,e):x?x.error?Object(o.createElement)(S,a()({response:x},e)):Object(o.createElement)(u,{className:n},x):A?Object(o.createElement)("div",{style:{position:"relative"}},Object(o.createElement)("div",{style:{position:"absolute",top:0,right:0}},Object(o.createElement)(g,null)),Object(o.createElement)(u,{className:n},A)):Object(o.createElement)(f,{className:n},Object(o.createElement)(g,null))}var j=l(2);const{registerBlockType:C}=wp.blocks,{Panel:E,PanelBody:S,RangeControl:k,FormTokenField:T,SelectControl:x,ToggleControl:_,TextControl:A}=wp.components,N=wp.apiFetch,{addQueryArgs:F}=wp.url,{InspectorControls:P,BlockControls:M,useBlockProps:B,BlockVerticalAlignmentToolbar:I}=wp.blockEditor,{useState:R,useEffect:D,useRef:L}=wp.element;C(j.name,{...j,edit:e=>{const{attributes:t,setAttributes:l}=e,[n,a]=R([]),[s,c]=R([]),[u,i]=R([]),[p,d]=R([]),b=e=>"object"==typeof e?e.reduce((e,t)=>({...e,[t.name]:t}),{}):{},m=b(n),h=b(u),f=(e,t,o)=>{if(t){if(t.some(e=>"string"==typeof e&&!o[e]))return;const n=t.map(e=>"string"==typeof e?o[e]:e);if(n.includes(null))return!1;l({[e]:n})}},g=L();let y;const w=e=>{let t,l,o;switch(g.current=!0,e){case"categories":t="/wp/v2/cmls_testimonial-category",l=s,o=a;break;case"tags":t="/wp/v2/cmls_testimonial-tags",l=p,o=i}if(t){const e=y=N({path:F(t,{per_page:-1,search:l})}).then(t=>{g.current&&e===y&&o(t)}).catch(()=>{g.current&&e===y&&o([])})}return()=>{g.current=!1}};D(()=>w("categories"),[s]),D(()=>w("tags"),[p]);const O=B();return Object(o.createElement)("div",O,Object(o.createElement)(P,null,Object(o.createElement)(E,null,Object(o.createElement)(S,{title:"Query Controls"},Object(o.createElement)(x,{label:"Order By",value:t.orderBy+"/"+t.order,onChange:e=>{const t=e.split("/");l({orderBy:t[0],order:t[1]})},options:[{value:"rand/asc",label:"Random"},{value:"date/desc",label:"Newest to oldest"},{value:"date/asc",label:"Oldest to newest"},{value:"post_title/asc",label:"Title A → Z"},{value:"post_title/desc",label:"Title Z → A"},{value:"menu_order/asc",label:"Manual Order Field (Ascending)"},{value:"menu_order/desc",label:"Manual Order Field (Descending)"}]}),Object(o.createElement)(T,{label:"Categories",placeholder:"Choose from existing categories.",value:t.categories&&t.categories.map(e=>e.name),suggestions:Object.keys(m),onChange:e=>f("categories",e,m),onInputChange:Object(r.debounce)(e=>c(e),300)}),Object(o.createElement)(T,{label:"Tags",placeholder:"Choose from existing tags.",value:t.tags&&t.tags.map(e=>e.name),suggestions:Object.keys(h),onChange:e=>f("tags",e,h),onInputChange:Object(r.debounce)(e=>d(e),300)}),Object(o.createElement)(k,{label:"Number of Testimonials to display",help:"Choose 0 to fetch all.",allowReset:!0,resetFallbackValue:0,step:1,withInputField:!0,marks:[{value:0,label:"All"},{value:50,label:"50"}],value:t.postsToShow,onChange:e=>l({postsToShow:null!==e?parseInt(e,10):0}),min:0,max:50})),Object(o.createElement)(S,{title:"Content Display",initialOpen:!1},Object(o.createElement)(x,{label:"Show Content",value:t.showContent,onChange:e=>l({showContent:e}),options:[{value:"full",label:"Full"},{value:"excerpt",label:"Excerpt"},{value:"none",label:"None"}]}),Object(o.createElement)(_,{label:"Show Customer Name",checked:t.showCustomerName,onChange:e=>l({showCustomerName:e})}),Object(o.createElement)(_,{label:"Show Customer Title",checked:t.showCustomerTitle,onChange:e=>l({showCustomerTitle:e})}),Object(o.createElement)(_,{label:"Show Company",checked:t.showCompany,onChange:e=>l({showCompany:e})}),Object(o.createElement)(_,{label:"Show Logo",checked:t.showLogo,onChange:e=>l({showLogo:e})})),Object(o.createElement)(S,{title:"Slider Options",initialOpen:!1},Object(o.createElement)(x,{label:"Animation Type",value:t.animationType,onChange:e=>l({animationType:e}),options:[{value:"slide",label:"Slide"},{value:"fade",label:"Fade"}]}),Object(o.createElement)(_,{label:"Show Arrows",checked:t.showArrows,onChange:e=>l({showArrows:e})}),Object(o.createElement)(_,{label:"Show Dots",checked:t.showDots,onChange:e=>l({showDots:e})}),Object(o.createElement)(k,{label:"Number of slides to show at once",allowReset:!0,resetFallbackValue:1,step:1,withInputField:!0,marks:[{value:1,label:"1"},{value:5,label:"5"}],value:t.slidesToShow,onChange:e=>l({slidesToShow:e?parseInt(e,10):1}),min:1,max:5}),Object(o.createElement)(k,{label:"Number of slides to move at once",allowReset:!0,resetFallbackValue:1,step:1,withInputField:!0,marks:[{value:1,label:"1"},{value:5,label:"5"}],value:t.slidesToScroll,onChange:e=>l({slidesToScroll:e?parseInt(e,10):1}),min:1,max:5}),Object(o.createElement)(_,{label:"Autoplay",checked:t.autoplay,onChange:e=>l({autoplay:e})}),t.autoplay&&Object(o.createElement)(A,{label:"Autoplay speed (in seconds)",type:"number",value:parseFloat(t.autoplaySpeed),onChange:e=>l({autoplaySpeed:e||0===e?parseFloat(e):0})}),Object(o.createElement)(A,{label:"Transition speed (in seconds)",type:"number",value:parseFloat(t.transitionSpeed),onChange:e=>l({transitionSpeed:e||0===e?parseFloat(e):0})})))),Object(o.createElement)(M,null,Object(o.createElement)(I,{value:t.verticalAlign,onChange:e=>{l({verticalAlign:e})}})),Object(o.createElement)(v,{block:j.name,attributes:t,httpMethod:"POST",onChange:()=>{const t=document.querySelector(`#block-${e.clientId} .splide`);t&&(t.splide&&t.splide.destroy(!0),t.splide=new Splide(t).mount())}}))}})}]);